---
# External services for Docker Compose containers
# Using externalName to route to Docker bridge network from K3s
apiVersion: v1
kind: Namespace
metadata:
  name: docker-services
---
# Jellyfin - Media Server
apiVersion: v1
kind: Service
metadata:
  name: jellyfin
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 8096
      targetPort: 8096
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: jellyfin
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 8096
---
# Sonarr - TV Shows
apiVersion: v1
kind: Service
metadata:
  name: sonarr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 8989
      targetPort: 8989
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: sonarr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 8989
---
# Radarr - Movies
apiVersion: v1
kind: Service
metadata:
  name: radarr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 7878
      targetPort: 7878
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: radarr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 7878
---
# Prowlarr - Indexer
apiVersion: v1
kind: Service
metadata:
  name: prowlarr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 9696
      targetPort: 9696
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: prowlarr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 9696
---
# Bazarr - Subtitles
apiVersion: v1
kind: Service
metadata:
  name: bazarr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 6767
      targetPort: 6767
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: bazarr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 6767
---
# qBittorrent (via Gluetun)
apiVersion: v1
kind: Service
metadata:
  name: qbittorrent
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 8081
      targetPort: 8081
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: qbittorrent
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40  # Gluetun IP
    ports:
      - port: 8081
---
# Portainer
apiVersion: v1
kind: Service
metadata:
  name: portainer
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 9000
      targetPort: 9000
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: portainer
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 9000
---
# Jellyseerr
apiVersion: v1
kind: Service
metadata:
  name: jellyseerr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 5055
      targetPort: 5055
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: jellyseerr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 5055
---
# Autobrr
apiVersion: v1
kind: Service
metadata:
  name: autobrr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 7474
      targetPort: 7474
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: autobrr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 7474
---
# Beszel Monitor
apiVersion: v1
kind: Service
metadata:
  name: beszel
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 8090
      targetPort: 8090
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: beszel
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 8090
---
# N8N
apiVersion: v1
kind: Service
metadata:
  name: n8n
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 5678
      targetPort: 5678
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: n8n
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 5678
---
# Open WebUI (AI)
apiVersion: v1
kind: Service
metadata:
  name: open-webui
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 8083
      targetPort: 8083
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: open-webui
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 8083
---
# Wizarr
apiVersion: v1
kind: Service
metadata:
  name: wizarr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 5690
      targetPort: 5690
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: wizarr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 5690
---
# Sabnzbd (via Gluetun)
apiVersion: v1
kind: Service
metadata:
  name: sabnzbd
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 8080
      targetPort: 8080
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: sabnzbd
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40  # Gluetun IP
    ports:
      - port: 8080
---
# Profilarr
apiVersion: v1
kind: Service
metadata:
  name: profilarr
  namespace: docker-services
spec:
  type: ClusterIP
  ports:
    - port: 6868
      targetPort: 6868
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: profilarr
  namespace: docker-services
subsets:
  - addresses:
      - ip: 192.168.1.40
    ports:
      - port: 6868
